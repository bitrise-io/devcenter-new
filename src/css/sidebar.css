.site-body .site-sidebar {
  width: 320px;

  & .site-sidebar-header {
    height: var(--header-height);
    margin: 0;
    padding: 0;
    border: 0;
    display: block;
    visibility: hidden;
  }

  & .nav-site-sidebar {
    background-color: var(--background-primary);
    top: var(--header-height);
    bottom: 0;
    padding: 0;
    width: 100%;
    position: absolute;
    border-right: 1px solid var(--border-regular);
    display: flex;
    flex-direction: column;

    & .sidebar-subpage-header {
      padding: 1.5rem 1.5rem 1rem 1.5rem;
      border-bottom: 1px solid var(--border-regular);
      margin-bottom: 0.75rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;

      & h3 {
        padding: 0.325rem 0;
      }

      & .sidebar-back-link {
        display: inline-flex;
        align-items: center;
        gap: 0.25rem;
        color: var(--text-link);

        &::before {
          content: "";
          display: inline-block;
          width: 1rem;
          height: 1rem;
          mask-image: url("../images/icon-arrow-left-16px.svg");
          mask-size: contain;
          mask-repeat: no-repeat;
          background-color: var(--icon-interactive);
        }
      }
    }

    & > li {
      border: 0;

      &:not(.opened) {
        display: none;
      }

      &.opened > a {
        display: none;
      }

      & > ul li,
      & > ul li.opened {
        & > a {
          color: var(--text-primary);
          font-size: 0.875rem;
          line-height: 1.25rem;
          font-weight: 400;
          text-decoration: none;
          position: relative;
          transition: none;
          background-color: transparent;

          &:hover {
            background-color: var(--background-secondary);
          }
          &:active {
            background-color: var(--background-tertiary); 
          }

          & .glyphicon {
            width: 1rem;
            height: 1rem;
            padding: 0;
            margin: 0;
            top: 50%;
            right: 1.25rem;
            transform: translateY(-50%);
            position: absolute;

            &::before {
              content: "";
              display: inline-block;
              width: 1rem;
              height: 1rem;
              mask-size: contain;
              mask-repeat: no-repeat;
              background-color: var(--icon-secondary);
              mask-image: url("../images/icon-chevron-down-16px.svg");
            }
          }
        }

        &.active > a {
          background-color: var(--background-selected);
          color: var(--text-primary);
          font-weight: 600;
          border-right: 2px solid var(--border-selected);

          &:hover {
            background-color: var(--background-selected-hover);
          }
        }
      }
      & > ul li.opened > a {
        & .glyphicon::before {
          mask-image: url("../images/icon-chevron-up-16px.svg");
        }
      }

      & > ul > li > a,
      & > ul > li.opened > a {
        padding: 0.5rem 3.5rem 0.5rem 1.5rem;
        display: flex;
        gap: 0.5rem;
        align-items: center;

        &::before {
          content: "";
          display: inline-block;
          width: 1rem;
          height: 1rem;
          mask-size: contain;
          mask-repeat: no-repeat;
          background-color: var(--icon-secondary);
        }

        /* Icons for Bitrias as a Platform subpages */
        &[data-permalink="bitrise-platform/the-bitrise-platform.html"]::before {
          mask-image: url("../images/icon-cycle-16px.svg");
        }
        &[data-permalink="bitrise-platform/getting-started-with-the-platform.html"]::before {
          mask-image: url("../images/icon-power-16px.svg");
        }
        &[data-permalink="bitrise-platform/accounts.html"]::before {
          mask-image: url("../images/icon-person-16px.svg");
        }
        &[data-permalink="bitrise-platform/workspaces.html"]::before {
          mask-image: url("../images/icon-dashboard-16px.svg");
        }
        &[data-permalink="bitrise-platform/apps.html"]::before {
          mask-image: url("../images/icon-folder-16px.svg");
        }
        &[data-permalink="bitrise-platform/connectivity.html"]::before {
          mask-image: url("../images/icon-arrows-horizontal-16px.svg");
        }

        /* Icons for Bitrias CI subpages */
        &[data-permalink="bitrise-ci/getting-started.html"]::before {
          mask-image: url("../images/icon-power-16px.svg");
        }
        &[data-permalink="bitrise-ci/steps-and-workflows.html"]::before {
          mask-image: url("../images/icon-workflow-flow-16px.svg");
        }
        &[data-permalink="bitrise-ci/configure-builds.html"]::before {
          mask-image: url("../images/icon-configure-16px.svg");
        }
        &[data-permalink="bitrise-ci/builds.html"]::before {
          mask-image: url("../images/icon-build-16px.svg");
        }
        &[data-permalink="bitrise-ci/dependencies-and-caching.html"]::before {
          mask-image: url("../images/icon-memory-16px.svg");
        }
        &[data-permalink="bitrise-ci/code-signing.html"]::before {
          mask-image: url("../images/icon-code-signing-16px.svg");
        }
        &[data-permalink="bitrise-ci/testing.html"]::before {
          mask-image: url("../images/icon-tasks-16px.svg");
        }
        &[data-permalink="bitrise-ci/deploying.html"]::before {
          mask-image: url("../images/icon-deployment-16px.svg");
        }
        &[data-permalink="bitrise-ci/insights.html"]::before {
          mask-image: url("../images/icon-insights-16px.svg");
        }
        &[data-permalink="bitrise-ci/bitrise-cli.html"]::before {
          mask-image: url("../images/icon-terminal-16px.svg");
        }
        &[data-permalink="bitrise-ci/api.html"]::before {
          mask-image: url("../images/icon-code-16px.svg");
        }
        &[data-permalink="bitrise-ci/references.html"]::before {
          mask-image: url("../images/icon-book-16px.svg");
        }


        &:active::before {
          background-color: var(--icon-primary);
        }

        &.active {
          background-color: var(--icon-interactive);
        }
      }

      & > ul > li.opened > ul > li > a {
        padding-left: 3.75rem;
      }
    }
  }
}